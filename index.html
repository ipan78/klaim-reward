<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>Kuis Kecepatan Handphone</title>

  <style>
    :root {
      --bg: #111418;
      --text: #e6e6e6;
      --accent: #ffd54a;
      --danger: #dc3545;
      --primary: #0d6efd;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: system-ui, sans-serif; background: #fff; color: #333; }

    .page {
      min-height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      background: #fff;
    }

    .stage {
      background: var(--bg);
      color: var(--text);
      width: 100%;
      max-width: 600px;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, .2);
    }

    h1 {
      color: var(--accent);
      font-size: clamp(20px, 2.2vw, 28px);
      text-align: center;
      margin: 0 0 14px 0;
    }

    .track {
      position: relative;
      display: flex;
      justify-content: center;
      gap: 8px;
      width: 100%;
      border-bottom: 2px solid #fff;
      padding: 40px 8px 14px;
      margin: 0 auto 18px;
      overflow: hidden;
    }

    .box {
      position: relative;
      width: clamp(46px, 9vw, 80px);
      height: clamp(68px, 14vw, 120px);
      border: 2px solid #fff;
      border-radius: 8px;
      flex: 0 0 auto;
      transition: background-color .2s ease;
      background: transparent;
    }

    .box::before {
      content: attr(data-number);
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: -28px;
      font-weight: 700;
      font-size: clamp(12px, 2.6vw, 16px);
      color: #fff;
      letter-spacing: .5px;
    }

    .handphone-icon {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: clamp(28px, 6vw, 48px);
      line-height: 1;
      transition: left .1s linear;
      will-change: left;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .controls button {
      padding: 10px 18px;
      font-size: clamp(14px, 2.4vw, 18px);
      font-weight: 700;
      border: 0;
      border-radius: 10px;
      cursor: pointer;
      color: #fff;
    }

    #startButton { background: var(--primary); }
    #stopButton { background: var(--danger); }
    #stopButton:disabled { opacity: .5; cursor: not-allowed; }

    #result {
      text-align: center;
      font-size: clamp(14px, 2.6vw, 18px);
      color: #cfcfcf;
      min-height: 40px;
      margin: 14px 6px 0;
      font-weight: 500;
    }

    /* ====== MODE HP (â‰¤650px) DENGAN RASIO 9:16 ====== */
    @media (max-width:650px) {
      .page {
        padding: 0;
        background: #000;
        min-height: 100dvh;
        display: block;
      }

      .frame-916 {
        height: 100dvh;
        width: 100vw;
        display: grid;
        place-items: center;
        background: #000;
      }

      .stage {
        width: min(100vw, calc(100dvh * 9 / 16));
        aspect-ratio: 9 / 16;
        height: auto;
        max-width: unset;
        border-radius: 0;
        padding: 16px 14px;
        background: var(--bg);
      }

      .track {
        padding-top: 36px;
        margin-bottom: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="frame-916">
      <div class="stage">
        <h1>Kuis Kecepatan: Tekan STOP!</h1>
        <div class="track" id="track">
          <div class="box" data-number="16"></div>
          <div class="box" data-number="15"></div>
          <div class="box" data-number="14"></div>
          <div class="box" data-number="13"></div>
          <div class="box" data-number="12"></div>
          <div class="box" data-number="11"></div>
          <div id="handphone" class="handphone-icon">ðŸ“±</div>
        </div>

        <div class="controls">
          <button id="startButton">START</button>
          <button
            id="stopButton"
            data-link="https://www.revenuecpmgate.com/xi3i4iib?key=6095d60b9a3feb799e825a0adfc80c31"
            disabled>
            STOP
          </button>
        </div>
        <p id="result">Tekan START untuk memulai kuis.</p>
      </div>
    </div>
  </div>

  <script>
    const handphone = document.getElementById('handphone');
    const startButton = document.getElementById('startButton');
    const stopButton = document.getElementById('stopButton');
    const resultDisplay = document.getElementById('result');
    const boxes = Array.from(document.querySelectorAll('.box'));
    const track = document.getElementById('track');

    let movementInterval = null;
    let currentIndex = -1;
    let firstBoxOffset = 0;
    let stepWidth = 0;
    const rewardLink = stopButton.getAttribute('data-link');

    function recalcPositions() {
      const hpWidth = handphone.offsetWidth || 40;
      if (boxes.length) {
        const style = getComputedStyle(boxes[0]);
        const marginX = parseFloat(style.marginLeft) + parseFloat(style.marginRight);
        firstBoxOffset = boxes[0].offsetLeft + (boxes[0].offsetWidth / 2) - (hpWidth / 2);
        const gap = parseFloat(getComputedStyle(track).columnGap || getComputedStyle(track).gap || 0);
        stepWidth = boxes[0].offsetWidth + gap;
        if (currentIndex < 0) handphone.style.left = `${firstBoxOffset}px`;
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      recalcPositions();
      window.addEventListener('resize', () => {
        recalcPositions();
        if (currentIndex >= 0) {
          const newPos = firstBoxOffset + currentIndex * stepWidth;
          handphone.style.left = `${newPos}px`;
        }
      });
      window.addEventListener('orientationchange', () => setTimeout(recalcPositions, 250), { passive: true });
    });

    function startMovement() {
      boxes.forEach(b => b.style.backgroundColor = 'transparent');
      stopButton.style.backgroundColor = getComputedStyle(document.documentElement).getPropertyValue('--danger');
      stopButton.style.color = '#fff';
      stopButton.textContent = 'STOP';

      startButton.disabled = true;
      stopButton.disabled = false;
      stopButton.removeEventListener('click', claimReward);
      stopButton.addEventListener('click', stopMovement);
      resultDisplay.textContent = 'Bergerak Cepat! Tekan STOP!';

      currentIndex = 0;
      recalcPositions();

      clearInterval(movementInterval);
      movementInterval = setInterval(() => {
        currentIndex = (currentIndex + 1) % boxes.length;
        const newPos = firstBoxOffset + currentIndex * stepWidth;
        handphone.style.left = `${newPos}px`;
      }, 100);
    }

    function stopMovement() {
      clearInterval(movementInterval);
      stopButton.disabled = true;
      startButton.disabled = true;

      const finalBox = boxes[currentIndex];
      const finalNumber = finalBox ? finalBox.getAttribute('data-number') : 'N/A';
      if (finalBox) {
        finalBox.style.backgroundColor = '#ffd54a';
        resultDisplay.innerHTML = `SELAMAT! Berhenti di <strong>Kotak ${finalNumber}</strong>!<br>Tekan tombol di bawah untuk klaim hadiah!`;

        stopButton.removeEventListener('click', stopMovement);
        stopButton.textContent = 'KLAIM REWARD âœ¨';
        stopButton.style.backgroundColor = 'limegreen';
        stopButton.style.color = '#000';
        stopButton.disabled = false;
        stopButton.addEventListener('click', claimReward);
      } else {
        resultDisplay.textContent = 'Terjadi kesalahan. Coba lagi.';
        startButton.disabled = false;
      }
    }

    function claimReward() {
      window.open(rewardLink, '_blank');
      stopButton.disabled = true;
      stopButton.textContent = 'STOP';
      stopButton.style.backgroundColor = '#dc3545';
      stopButton.style.color = '#fff';
      stopButton.removeEventListener('click', claimReward);
      stopButton.addEventListener('click', stopMovement);
      startButton.disabled = false;
      resultDisplay.textContent = 'Silakan tekan START untuk bermain lagi.';
      boxes.forEach(b => b.style.backgroundColor = 'transparent');
      currentIndex = -1;
      recalcPositions();
    }

    startButton.addEventListener('click', startMovement);
    stopButton.addEventListener('click', stopMovement);
  </script>
</body>
</html>
